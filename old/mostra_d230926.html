<span ng-include="'view/navbar.html'"></span>

<section id="showAns">
    <p> Cras luctus efficitur dignissim. Nam vel metus vitae tellus ornare commodo. Cras condimentum erat pellentesque 
        finibus aliquet. Ut vel lectus sit amet ante pharetra ullamcorper. Donec aliquet tellus nec facilisis accumsan. 
        Duis sed ex sollicitudin, gravida velit sed, fringilla est.</p>

    <br />

    <div class="mb-3 row">
        <div class="col-sm-10">
            <input class="form-control" type="text" ng-model="criterioDeBusca" placeholder="Procurando por..." />
        </div>    

        <div class="col-sm-2 d-grid gap-2" style="text-align: right;">
            <button class="btn btn-outline-success" href="#!insere"><i class="fa fa-file">&nbsp;</i>Adiciona ANS</button>
        </div>                            
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>ANS</th>
                <th>Departamento</th>
                <th>Responsável</th>
                <th>Consulta</th>
                <th>Validade</th>
                <th>Dt assinatura</th>
                <th>E-mail</th>
                <th>Situação</th>
                <th colspan="2" style="text-align: center;">Ação</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in listaAtual | filter:criterioDeBusca">
                <td>{{item.id_ans}}</td>
                <td>{{item.departamento}}</td>
                <td>{{item.responsavel}}</td>
                <td>{{item.consulta}}</td>
                <td>{{item.validade}}</td>
                <td>{{item.dt_assinatura | date:'dd/MM/yyyy'}}</td>
                <td>{{item.email}}</td>
                <td>{{item.situacao}}</td>
                <td><a class="btn btn-outline-warning btn-sm" ng-click="btnAtualiza(item)" data-bs-toggle="modal" data-bs-target="#modalAlt"><i class="fa fa-edit">&nbsp;</i>Altera</a></td>
                <td><button class="btn btn-outline-danger btn-sm" ng-click="btnRemove(item)" data-bs-toggle="modal" data-bs-target="#modalDel"><i class="fa fa-trash">&nbsp;</i>Remove</button></td>
            </tr>
        </tbody>
    </table>    

    <div class="pull-right" style="margin-top:-30px;">
        <dir-pagination-controls
           max-size="5"
           direction-links="true"
           boundary-links="true" >
        </dir-pagination-controls>
    </div>
</section>


<!-- Modal pra remoção de registro -->
<div class="modal" id="modalDel">
    <div class="modal-dialog">
        <div class="modal-content">
  
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Exclusão de ANS</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
  
            <!-- Modal body -->
            <div class="modal-body">
                <p>Confirma exclusão do ANS num. {{idx}}?</p>  
            </div>
  
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="btnSolicitaRemocao()">Confirma</button>
                <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Desiste</button>
            </div>
  
        </div>
    </div>
</div>


<!-- Modal pra alteração de registro -->
<div class="modal" id="modalAlt">
    <div class="modal-dialog">
        <div class="modal-content">
  
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Alteração dos termos do ANS</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
  
            <!-- Modal body -->
            <div class="modal-body">
                <form action="./api/altera.php" method="POST" id="formAlt" name="formAlt" enctype="multipart/form-data">
                    <div class="mb-3 mt-3">
                        <label for="indice" class="form-label">Indice:</label>
                        <input type="text" class="form-control" id="indice" name="indice" value="{{data1}}" />
                    </div>
                    
                    <div class="mb-3 mt-3">
                        <label for="situacao" class="form-label">Situacao:</label>
                        <input type="text" class="form-control" id="situacao" name="situacao" value="{{data2}}"/>
                    </div>
                    
                    <div class="mb-3">
                        <label for="tempo" class="form-label">Faixa de tempo:</label>
                        <input type="text" class="form-control" id="tempo" name="tempo" value="{{data3}}" />
                    </div>
                    
                    <div class="mb-3">
                        <label for="info" class="form-label">Informacao:</label>
                        <input type="text" class="form-control" id="info" name="info" value="{{data4}}" />
                    </div>
                        
                    <hr />
                    <button type="button" class="btn btn-primary">Confirma</button>
                    <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Desiste</button>
                </form> 
            </div>
  
        </div>
    </div>
</div>


